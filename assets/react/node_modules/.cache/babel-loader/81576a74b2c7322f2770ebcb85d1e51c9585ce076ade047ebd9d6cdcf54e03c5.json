{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useSearchParams}from'react-router-dom';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const PregameMatchesPage=()=>{const navigate=useNavigate();const[searchParams]=useSearchParams();const sport=searchParams.get('sport')||'soccer';const filter=searchParams.get('filter')||'today';const leagues=searchParams.getAll('leagues');const[matches,setMatches]=useState([]);const[loading,setLoading]=useState(false);useEffect(()=>{fetchMatches();},[sport,filter,leagues]);const fetchMatches=async()=>{setLoading(true);try{const params=new URLSearchParams({sport:sport,filter:filter});leagues.forEach(league=>{params.append('leagues',league);});const response=await fetch(\"/api/pregame/matches?\".concat(params));const data=await response.json();setMatches(data.matches||[]);}catch(error){console.error('Error fetching matches:',error);setMatches([]);}finally{setLoading(false);}};const filterLabel=filterKey=>{const labels={'one_hour':'1 Hour','three_hours':'3 Hours','six_hours':'6 Hours','twelve_hours':'12 Hours','today':'Today','all':'All'};return labels[filterKey]||'Unknown';};const formatDateTime=timestamp=>{if(!timestamp)return'Unknown';try{const date=new Date(timestamp*1000);return date.toLocaleString('en-GB',{day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'}).replace(',','');}catch(error){return'Unknown';}};const getHomeAwayOdds=markets=>{if(!markets||!markets.home_away)return{home:null,away:null};const homeOdd=markets.home_away.find(o=>o.name==='Home');const awayOdd=markets.home_away.find(o=>o.name==='Away');return{home:homeOdd?homeOdd.value:null,away:awayOdd?awayOdd.value:null};};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-screen bg-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sticky top-0 z-10 bg-gray-800 text-white p-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-xl font-bold\",children:[\"Matches for \",sport.charAt(0).toUpperCase()+sport.slice(1),\" - \",filterLabel(filter)]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(\"/pregame/\".concat(sport,\"?filter=\").concat(filter)),className:\"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition\",children:[\"Back to \",sport.charAt(0).toUpperCase()+sport.slice(1)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 p-4 overflow-y-auto\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600\",children:\"Loading matches...\"})}):matches.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No matches available for the selected sport, filter, or leagues.\"}):matches.map((countryData,countryIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-2 text-gray-900\",children:countryData.country}),countryData.leagues.map((leagueData,leagueIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium mb-2 text-gray-800\",children:leagueData.league}),(()=>{const matchesByTime=leagueData.matches.reduce((acc,match)=>{const timeKey=match.start_time;if(!acc[timeKey])acc[timeKey]=[];acc[timeKey].push(match);return acc;},{});return Object.entries(matchesByTime).map(_ref=>{let[startTime,timeMatches]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium mb-2 text-gray-700\",children:formatDateTime(parseInt(startTime))}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-4\",children:timeMatches.map((match,matchIndex)=>{const{home,away}=getHomeAwayOdds(match.markets);return/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const params=new URLSearchParams({sport:sport,filter:filter});leagues.forEach(league=>{params.append('leagues',league);});navigate(\"/pregame/match/\".concat(match.match_id,\"?\").concat(params));},className:\"block bg-gray-50 p-3 rounded shadow hover:bg-gray-100 transition text-left w-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-800\",children:[match.team1_name,\" vs \",match.team2_name]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Home\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800\",children:home?home.toFixed(2):'-'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Away\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800\",children:away?away.toFixed(2):'-'})]})]})]})},\"\".concat(match.match_id,\"-\").concat(matchIndex));})})]},startTime);});})()]},\"\".concat(leagueData.league,\"-\").concat(leagueIndex)))]},\"\".concat(countryData.country,\"-\").concat(countryIndex)))})]});};export default PregameMatchesPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}